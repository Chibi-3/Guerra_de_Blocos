<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Guerra de Blocos: Escalada Infinita</title>
<style>
    body {
        margin: 0;
        background-color: #0d1b2a;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    #gameCanvas {
        background-color: #1b263b;
        display: block;
        border-radius: 10px;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="500" height="700"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const playerSize = 30;
const platformWidth = 80;
const platformHeight = 15;
const gravity = 0.4;
const jumpStrength = -10;

// Jogadores em lados opostos
let players = [
    { x: canvas.width / 4 - playerSize / 2, y: canvas.height - 100, vy: 0, color: "blue" },
    { x: (3 * canvas.width) / 4 - playerSize / 2, y: canvas.height - 100, vy: 0, color: "red" }
];

let platforms = [];
let cameraY = 0;
let highestPlatformY = 0;

// Inicializa plataformas
function initPlatforms() {
    platforms = [];
    let initialY = canvas.height - 50;
    for (let i = 0; i < 10; i++) {
        platforms.push({ x: canvas.width / 4 - platformWidth / 2, y: initialY });
        platforms.push({ x: (3 * canvas.width) / 4 - platformWidth / 2, y: initialY });
        initialY -= 120;
    }
    highestPlatformY = initialY;
}

initPlatforms();

function generatePlatforms() {
    while (highestPlatformY > cameraY - canvas.height) {
        platforms.push({
            x: Math.random() * (canvas.width / 2 - platformWidth - 10) + 10,
            y: highestPlatformY
        });
        platforms.push({
            x: Math.random() * (canvas.width / 2 - platformWidth - 10) + canvas.width / 2 + 10,
            y: highestPlatformY
        });
        highestPlatformY -= 120;
    }
}

function update() {
    players.forEach(player => {
        player.vy += gravity;
        player.y += player.vy;

        // Colisão com plataformas
        platforms.forEach(p => {
            if (player.x < p.x + platformWidth &&
                player.x + playerSize > p.x &&
                player.y + playerSize > p.y &&
                player.y + playerSize < p.y + platformHeight + player.vy) {
                player.vy = jumpStrength;
            }
        });

        // Subida da câmera
        if (player.y < canvas.height / 2) {
            let diff = canvas.height / 2 - player.y;
            player.y = canvas.height / 2;
            cameraY += diff;
            platforms.forEach(p => p.y += diff);
        }
    });

    generatePlatforms();
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Plataformas
    ctx.fillStyle = "#61a5c2";
    platforms.forEach(p => {
        ctx.fillRect(p.x, p.y, platformWidth, platformHeight);
    });

    // Linha divisória
    ctx.strokeStyle = "#ccc";
    ctx.beginPath();
    ctx.moveTo(canvas.width / 2, 0);
    ctx.lineTo(canvas.width / 2, canvas.height);
    ctx.stroke();

    // Jogadores
    players.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, playerSize, playerSize);
    });
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}

// Controles
document.addEventListener("keydown", e => {
    if (e.code === "ArrowLeft") players[0].x -= 20;
    if (e.code === "ArrowRight") players[0].x += 20;
    if (e.code === "KeyA") players[1].x -= 20;
    if (e.code === "KeyD") players[1].x += 20;
});

loop();
</script>
</body>
</html>
